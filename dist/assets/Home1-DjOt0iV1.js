import{j as e,r as c,u as E,b,d as x,h as A,c as S,i as R,q as U,w as k,g as Q}from"./index-0vot58bT.js";const L=({id:v,name:d,expired:t,price:r,quantity:u,onClick:o})=>e.jsxs("div",{className:"card1",onClick:o,children:[e.jsx("div",{className:"card1-image",children:e.jsx("span",{children:d})}),e.jsxs("div",{className:"card1-details",children:[e.jsxs("div",{className:"expired",children:["Expired: ",t]}),e.jsxs("div",{className:"quantity",children:["Quantity: ",u]}),e.jsxs("div",{className:"price",children:["$",r]})]})]}),M=({onSave:v,onClose:d,initialData:t})=>{const[r,u]=c.useState(""),[o,g]=c.useState(""),[l,j]=c.useState(""),[p,y]=c.useState(""),[i,f]=c.useState(""),[h,P]=c.useState(""),[N,C]=c.useState(!1),{user:m}=E();c.useEffect(()=>{t&&(u(t.product_name||""),g(t.imageUrl||""),j(t.price||""),y(t.product_detail||""),f(t.defect_exp_date||""),P(t.quantity||""))},[t]);const _=async s=>{const n=S(x,"Products"),a=U(n,k("product_name","==",s));return!(await Q(a)).empty},q=async()=>{if(!m){alert("You are not logged in!");return}if(await _(r)&&(!t||t.product_name!==r)){alert("A product with the same name already exists. Please use a different name.");return}const n={product_name:r,imageUrl:o,price:l,product_detail:p,defect_exp_date:i,quantity:Number(h),username:m.username,uid:m.uid};try{if(t&&t.id){const a=b(x,"Products",t.id);await A(a,n)}else{const a=S(x,"Products");await R(a,n)}C(!0),setTimeout(()=>{d(),v(),navigate(0)},2e3)}catch(a){console.error("Error saving product:",a),alert("Failed to save product: "+a.message)}},w=()=>r&&o&&l&&p&&i&&h;return e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("span",{className:"close",onClick:d,children:"Ã—"}),e.jsx("h2",{children:t&&t.id?"Edit Product":"Add Product"}),e.jsx("input",{type:"text",placeholder:"Product Name",value:r,onChange:s=>u(s.target.value)}),e.jsx("input",{type:"text",placeholder:"Image URL",value:o,onChange:s=>g(s.target.value)}),e.jsx("input",{type:"text",placeholder:"Price",value:l,onChange:s=>j(s.target.value)}),e.jsx("textarea",{placeholder:"Description",value:p,onChange:s=>y(s.target.value)}),e.jsx("input",{type:"text",placeholder:"Expiration Date",value:i,onChange:s=>f(s.target.value)}),e.jsx("input",{type:"number",placeholder:"Quantity",value:h,onChange:s=>P(s.target.value)}),e.jsx("button",{onClick:q,disabled:!w(),children:"Save Product"}),N]})})};export{M as A,L as C};
