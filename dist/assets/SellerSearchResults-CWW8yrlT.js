import{e as P,r as t,A as q,j as r,c as E,q as j,w as I,g,d as i}from"./index-CaDHxqAo.js";import{C as A,A as M}from"./Home1-DV__eXVY.js";const D=()=>{const{searchTerm:o}=P(),[n,f]=t.useState([]),[p,h]=t.useState([]),[m,c]=t.useState(!1),[S,u]=t.useState(null),{user:s}=t.useContext(q);t.useEffect(()=>{(async()=>{if(s&&s.uid){const a=E(i,"Products"),d=j(a,I("uid","==",s.uid)),y=(await g(d)).docs.map(l=>({id:l.id,...l.data()}));f(y)}})()},[s==null?void 0:s.uid]),t.useEffect(()=>{if(o){const e=o.toLowerCase(),a=n.filter(d=>d.product_name.toLowerCase().includes(e));h(a)}},[o,n]);const x=e=>{u(e),c(!0)},C=()=>{c(!1),u(null)},w=async e=>{try{const a=doc(i,"Products",e.id);await updateDoc(a,e),c(!1),fetchProducts()}catch{alert("Product added/updated successfully!")}};return r.jsxs("div",{className:"home",children:[p.map(e=>r.jsx(A,{id:e.id,name:e.product_name,expired:e.defect_exp_date,price:e.price,quantity:e.quantity,imageUrl:e.imageUrl,onClick:()=>x(e)},e.id)),m&&r.jsx(M,{onSave:w,onClose:C,initialData:S})]})};export{D as default};
