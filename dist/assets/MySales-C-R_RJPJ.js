import{u as x,r as c,j as s,c as j,q as u,w as m,g as p,a as g,b as S,d as l}from"./index-B3Gr2Rn1.js";const N=()=>{const{user:t}=x(),[a,o]=c.useState([]);c.useEffect(()=>{(async()=>{if(t){const r=j(l,"Sales"),n=u(r,m("sellerUsername","==",t.username)),h=(await p(n)).docs.map(d=>({id:d.id,...d.data()}));o(h)}})()},[t]);const i=async e=>{try{await g(S(l,"Sales",e)),o(a.filter(r=>r.id!==e))}catch(r){console.error("Error deleting sale: ",r)}};return s.jsxs("div",{className:"sales-container",children:[s.jsx("div",{className:"aa",children:s.jsx("h1",{children:"My Sales"})}),a.length>0?a.map(e=>s.jsxs("div",{className:"order-card",children:[s.jsxs("div",{className:"order-header",children:[s.jsxs("h2",{children:["Order ID: ",e.id]}),s.jsx("button",{className:"delete-button1",onClick:()=>i(e.id),children:"X"})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",e.orderDate.toDate().toLocaleString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Amount:"})," $",e.totalAmount.toFixed(2)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",e.status]}),s.jsx("div",{className:"order-items",children:e.orderItems.map((r,n)=>s.jsxs("div",{className:"order-item",children:[s.jsxs("p",{children:[s.jsx("strong",{children:r.product_name})," - $",r.price.toFixed(2)," x ",r.quantity," = $",r.total.toFixed(2)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Buyer:"})," ",e.buyerUsername]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Address:"})," ",r.address]})]},n))}),s.jsxs("p",{className:"total",children:[s.jsx("strong",{children:"Total Cost:"})," $",e.totalAmount.toFixed(2)]})]},e.id)):s.jsxs("p",{children:["No sales found for ",t==null?void 0:t.username,"."]})]})};export{N as default};
