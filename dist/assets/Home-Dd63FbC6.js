import{f as g,u as x,j as t}from"./index-Btjp9eyC.js";import{B as d}from"./ReactToastify-B9fLYR-3.js";const f=({id:u,image:i,name:a,price:o})=>{const r=g(),{user:m}=x(),l=e=>{if(!m){d.info("Please log in to add items to your cart."),r("/login");return}let s=JSON.parse(localStorage.getItem("cart"))||[];const n={id:u,image:i,name:a,price:o,quantity:1,totalPrice:parseFloat(o.replace("$",""))},c=s.findIndex(p=>p.name===n.name);c>-1?(s[c].quantity+=1,s[c].totalPrice+=n.totalPrice):s.push(n),localStorage.setItem("cart",JSON.stringify(s)),window.dispatchEvent(new Event("storage")),d.success("Item added to cart!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e&&r("/cart")};return t.jsxs("div",{className:"card",onClick:()=>r(`/product/${encodeURIComponent(a)}`),children:[t.jsx("img",{src:i,alt:a,className:"card-image"}),t.jsxs("div",{className:"card-details",children:[t.jsx("span",{className:"name",children:a}),t.jsx("span",{className:"price",children:o})]}),t.jsxs("div",{className:"card-actions",children:[t.jsx("button",{className:"buy-button",onClick:e=>{e.stopPropagation(),l(!0)},children:"Buy Now"}),t.jsx("button",{className:"cart-button",onClick:e=>{e.stopPropagation(),l(!1)},children:"Add to Cart"})]})]})};export{f as C};
