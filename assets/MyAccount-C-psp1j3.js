import{u as P,r as u,j as e,b as l,d as m,k as h,h as w}from"./index-QgrjDHAH.js";import{Q as y,B as o}from"./ReactToastify-CArS1_Qf.js";const N=()=>{const{user:t}=P(),[r,p]=u.useState({firstname:"",surname:"",username:"",address:"",email:"",phoneNumber:""}),[n,f]=u.useState({oldPassword:"",newPassword:"",confirmNewPassword:""});u.useEffect(()=>{(async()=>{if(t)try{const s=l(m,"Users",t.uid),d=await h(s);d.exists()?p(d.data()):o.error("User information not found.")}catch{o.error("Failed to fetch user information.")}})()},[t]);const c=a=>{const{name:s,value:d}=a.target;p({...r,[s]:d})},i=a=>{f({...n,[a.target.name]:a.target.value})},x=async a=>{if(a.preventDefault(),t)try{const s=l(m,"Users",t.uid);await w(s,r),o.success("User info updated successfully")}catch{o.error("Failed to update user information.")}},j=async a=>{if(a.preventDefault(),n.newPassword!==n.confirmNewPassword){o.error("New passwords do not match!");return}if(t)try{const s=l(m,"Users",t.uid),d=await h(s);d.exists()&&(d.data().password===n.oldPassword?(await w(s,{password:n.newPassword}),o.success("Password updated successfully")):o.error("Old password is incorrect"))}catch{o.error("Failed to update password.")}};return e.jsxs("div",{className:"account-container",children:[e.jsxs("h1",{children:["My Account: ",r.username]}),e.jsxs("div",{className:"user-info-container",children:[e.jsx("h2",{children:"Personal Information"}),e.jsxs("form",{onSubmit:x,children:[e.jsx("input",{type:"text",name:"firstname",value:r.firstname,onChange:c,placeholder:"First name"}),e.jsx("input",{type:"text",name:"surname",value:r.surname,onChange:c,placeholder:"Surname"}),e.jsx("input",{type:"text",name:"address",value:r.address,onChange:c,placeholder:"Address"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:c,placeholder:"Email"}),e.jsx("input",{type:"text",name:"phoneNumber",value:r.phoneNumber,onChange:c,placeholder:"Phone number"}),e.jsx("button",{type:"submit",className:"save-btn",children:"Save Changes"})]})]}),e.jsxs("div",{className:"password-container",children:[e.jsx("h2",{children:"Password Settings"}),e.jsxs("form",{onSubmit:j,children:[e.jsx("input",{type:"password",name:"oldPassword",value:n.oldPassword,onChange:i,placeholder:"Old password"}),e.jsx("input",{type:"password",name:"newPassword",value:n.newPassword,onChange:i,placeholder:"New password"}),e.jsx("input",{type:"password",name:"confirmNewPassword",value:n.confirmNewPassword,onChange:i,placeholder:"Confirm new password"}),e.jsx("button",{type:"submit",className:"change-password-btn",children:"Change Password"})]})]}),e.jsx(y,{})]})};export{N as default};
