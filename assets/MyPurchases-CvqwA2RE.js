import{e as x,r as d,j as s,q as u,w as j,c as m,g as p,a as g,b as f,d as i}from"./index-9z2HV39b.js";const N=()=>{const{username:r}=x(),[a,c]=d.useState([]);d.useEffect(()=>{(async()=>{const t=u(m(i,"Orders"),j("username","==",r)),h=(await p(t)).docs.map(o=>({id:o.id,...o.data()}));c(h)})()},[r]);const l=async e=>{try{await g(f(i,"Orders",e)),c(a.filter(t=>t.id!==e))}catch(t){console.error("Error deleting order: ",t)}};return s.jsxs("div",{className:"purchases-container",children:[s.jsx("div",{className:"aa",children:s.jsx("h1",{children:"My Purchases"})}),a.length>0?a.map(e=>s.jsxs("div",{className:"order-card",children:[s.jsxs("div",{className:"order-header",children:[s.jsxs("h2",{children:["Order ID: ",e.id]}),s.jsx("button",{className:"delete-button1",onClick:()=>l(e.id),children:"X"})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",e.orderDate.toDate().toLocaleString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Amount:"})," $",e.totalAmount.toFixed(2)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",e.status]}),s.jsx("div",{className:"order-items",children:e.orderItems.map((t,n)=>s.jsx("div",{className:"order-item",children:s.jsxs("p",{children:[s.jsx("strong",{children:t.product_name})," - $",t.price.toFixed(2)," x ",t.quantity," = $",t.total.toFixed(2)]})},n))}),s.jsxs("p",{className:"total",children:[s.jsx("strong",{children:"Total Cost:"})," $",e.totalAmount.toFixed(2)]})]},e.id)):s.jsxs("p",{children:["No purchases found for ",r,"."]})]})};export{N as default};
